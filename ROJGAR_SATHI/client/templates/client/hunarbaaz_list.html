{% extends 'base/base.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'client/css/hunarbaaz.css' %}">


<h2 style="text-align:center; color:#004aad;">Available Hunarbaaz</h2>

<!-- Search Form -->
<form method="get" class="search-bar">
  <input type="text" name="skill" placeholder="Search by skill..." value="{{ request.GET.skill }}">
  <select name="location">
    <option value="">All Locations</option>
    {% for loc in unique_locations %}
      <option value="{{ loc }}" {% if request.GET.location == loc %}selected{% endif %}>{{ loc }}</option>
    {% endfor %}
  </select>
  <button type="submit">Search</button>
</form>

<!-- Cards -->
<div class="card-grid">
  {% for profile in profiles %}
  {% if user.clientprofile%}
    <a href="{% url 'client:hunarbaaz_details' profile.id %}" style="text-decoration: none;">
      {% elif user.hunarbaaz %}
      <a href="{% url 'base:access_denied' %}" style="text-decoration: none;">
      {%else%}
          <a href="{% url 'base:login'  %}" style="text-decoration: none;">
{% endif %}
      <div class="profile-card position-relative">
    
        {% if profile.is_verified %}
          <div class="verified-icon position-absolute">
            <i class="bi bi-patch-check-fill"></i>
          </div>
        {% endif %}

        <img src="{% if profile.profile_pic %}{{ profile.profile_pic.url }}{% else %}{% static 'base/images/default.jpg' %}{% endif %}" class="profile-image" alt="Profile Picture">
        
        <div class="profile-details">
          <h5>{{ profile.user.username }}</h5>
          <p><strong>Skill:</strong> {{ profile.skill }}</p>
          <p><strong>Location:</strong> {{ profile.location }}</p>
          <p><strong>Experience:</strong> {{ profile.experience }} Years</p>
        </div>
      </div>
    </a>
  {% empty %}
    <p style="text-align: center;">No Hunarbaaz profiles found.</p>
  {% endfor %}
</div>


{% endblock %}
