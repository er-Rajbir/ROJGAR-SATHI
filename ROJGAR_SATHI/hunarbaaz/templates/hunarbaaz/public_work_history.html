{% extends 'base/base.html' %}
{% block content %}
  <div class="container mt-5 mb-5">
    <h3 class="text-center text-success mb-4">
      {% if user.clientprofile %}
        <b>Work History of {{ profile.full_name }}</b>
      {% elif user.hunarbaaz %}
        <b>My Work History</b>
      {% else %}
        {{ user.username }}
      {% endif %}
    </h3>

    <!-- ‚úÖ Completed Jobs -->
    {% if completed_jobs %}
      <div class="row g-4">
        {% for job in completed_jobs %}
          <div class="col-md-6">
            <div class="card shadow-sm border-0">
              <!-- üë§ Client Name + HR -->
              <div class="card-header bg-white border-bottom-0">
                <h5 class="text-info text-center mb-1">üë§ {{ job.client.username }}</h5>
                <hr class="mb-0" />
              </div>

              <div class="row g-0 align-items-stretch">
                <!-- üî∑ Left Side: Job Info -->
                <div class="col-7 border-end">
                  <div class="card-body">
                    <p>
                      <strong>üìã Description:</strong> {{ job.job_description }}
                    </p>
                    <p>
                      <strong>üìç Location:</strong> {{ job.location }}
                    </p>
                    <p>
                      <strong>üìÜ Start:</strong> {{ job.start_date|date:'d M Y' }}
                    </p>
                    <p>
                      <strong>üìÖ End:</strong> {{ job.end_date|date:'d M Y' }}
                    </p>
                  </div>
                </div>

                <!-- üí¨ Right Side: Rating & Review -->
                <div class="col-5 d-flex align-items-center">
                  <div class="card-body">
                    {% if job.rating %}
                      <p class="mb-1">
                        <strong>‚≠ê Rating:</strong>
                        {% for i in '12345'|make_list %}
                          {% if forloop.counter <= job.rating %}
                            <span style="color: gold;">&#9733;</span>
                          {% else %}
                            <span style="color: lightgray;">&#9733;</span>
                          {% endif %}
                        {% endfor %}
                        <small>({{ job.rating }}/5)</small>
                      </p>
                    {% endif %}
                    {% if job.review %}
                      <p class="mt-2">
                        <strong>üí¨ Review:</strong> <em>"{{ job.review }}"</em>
                      </p>
                    {% else %}
                      <p class="text-muted mt-2">No review given.</p>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="alert alert-info text-center mt-4">No completed jobs yet.</div>
    {% endif %}
  </div>
{% endblock %}
